# ====================
# Base Configuration
# ====================
sonar.projectKey=revisium_revisium-admin
sonar.organization=revisium

# ====================
# Coverage Settings
# ====================
sonar.coverage.exclusions=**/*

# ====================
# Issue Ignore Rules
# ====================
sonar.issue.ignore.multicriteria=\
  empty1,empty2,empty3,\
  e2e1,e2e2,e2e3,\
  spec1,spec2,spec3,\
  security1,security2,security3,\
  style1,style2,style3,style4,style5,style6,\
  complexity1,complexity2,complexity3,complexity4,\
  tech1,tech2,tech3

# ====================
# Empty Methods Pattern
# ====================
# Empty init/dispose methods are acceptable design pattern for base classes and ViewModels
sonar.issue.ignore.multicriteria.empty1.ruleKey=typescript:S1186
sonar.issue.ignore.multicriteria.empty1.resourceKey=**/*Model.ts

sonar.issue.ignore.multicriteria.empty2.ruleKey=typescript:S1186
sonar.issue.ignore.multicriteria.empty2.resourceKey=**/StackItem.ts

sonar.issue.ignore.multicriteria.empty3.ruleKey=typescript:S1186
sonar.issue.ignore.multicriteria.empty3.resourceKey=**/LinkMaker.ts

# ====================
# E2E Test Exclusions
# ====================
# Math.random() is safe in E2E tests (not security-sensitive)
sonar.issue.ignore.multicriteria.e2e1.ruleKey=typescript:S2245
sonar.issue.ignore.multicriteria.e2e1.resourceKey=**/e2e/**

# Nested functions in E2E tests are acceptable due to Playwright test structure
sonar.issue.ignore.multicriteria.e2e2.ruleKey=typescript:S2004
sonar.issue.ignore.multicriteria.e2e2.resourceKey=**/e2e/**

# Skipped tests in E2E are acceptable (work in progress)
sonar.issue.ignore.multicriteria.e2e3.ruleKey=typescript:S1607
sonar.issue.ignore.multicriteria.e2e3.resourceKey=**/e2e/**

# ====================
# Spec File Exclusions
# ====================
# void operator is acceptable in spec files for ensuring instantiation
sonar.issue.ignore.multicriteria.spec1.ruleKey=typescript:S3735
sonar.issue.ignore.multicriteria.spec1.resourceKey=**/*.spec.ts

# Skipped tests in spec files are acceptable (work in progress)
sonar.issue.ignore.multicriteria.spec2.ruleKey=typescript:S1607
sonar.issue.ignore.multicriteria.spec2.resourceKey=**/*.spec.ts

# Constructor for side effects in spec files is acceptable for testing instantiation
sonar.issue.ignore.multicriteria.spec3.ruleKey=typescript:S1848
sonar.issue.ignore.multicriteria.spec3.resourceKey=**/*.spec.ts

# ====================
# Security Hotspot Exclusions
# ====================
# npm install scripts are required for postinstall hooks
sonar.issue.ignore.multicriteria.security1.ruleKey=githubactions:S6505
sonar.issue.ignore.multicriteria.security1.resourceKey=**/.github/workflows/**

# PATH usage in dev config is safe (build tooling only)
sonar.issue.ignore.multicriteria.security2.ruleKey=typescript:S4036
sonar.issue.ignore.multicriteria.security2.resourceKey=**/vite.config.ts

# Docker COPY . is safe with proper .dockerignore
sonar.issue.ignore.multicriteria.security3.ruleKey=docker:S6470
sonar.issue.ignore.multicriteria.security3.resourceKey=**/*Dockerfile*

# ====================
# Style Exclusions
# ====================
# Array index keys are intentional in some cases (stable lists)
sonar.issue.ignore.multicriteria.style1.ruleKey=typescript:S6479
sonar.issue.ignore.multicriteria.style1.resourceKey=**/*.tsx

# Nested ternary for loading/empty/data states is common React pattern
sonar.issue.ignore.multicriteria.style2.ruleKey=typescript:S3358
sonar.issue.ignore.multicriteria.style2.resourceKey=**/*.tsx

# Type aliases for domain semantics (SelectForeignKeyResult = string, etc.)
sonar.issue.ignore.multicriteria.style3.ruleKey=typescript:S6564
sonar.issue.ignore.multicriteria.style3.resourceKey=**/config/types.ts

# Type aliases in spec files
sonar.issue.ignore.multicriteria.style4.ruleKey=typescript:S6564
sonar.issue.ignore.multicriteria.style4.resourceKey=**/*.spec.ts

# void operator is used intentionally for fire-and-forget async calls
sonar.issue.ignore.multicriteria.style5.ruleKey=typescript:S3735
sonar.issue.ignore.multicriteria.style5.resourceKey=**/*.ts

# TODOs are tracked separately
sonar.issue.ignore.multicriteria.style6.ruleKey=typescript:S1135
sonar.issue.ignore.multicriteria.style6.resourceKey=**/*.ts

# ====================
# Cognitive Complexity Exclusions
# ====================
# Complex domain logic in Schema entity and related utilities
sonar.issue.ignore.multicriteria.complexity1.ruleKey=typescript:S3776
sonar.issue.ignore.multicriteria.complexity1.resourceKey=**/src/entities/Schema/**

# Complex domain logic in RowList widget
sonar.issue.ignore.multicriteria.complexity2.ruleKey=typescript:S3776
sonar.issue.ignore.multicriteria.complexity2.resourceKey=**/src/widgets/RowList/**

# Complex domain logic in MigrationsPage
sonar.issue.ignore.multicriteria.complexity3.ruleKey=typescript:S3776
sonar.issue.ignore.multicriteria.complexity3.resourceKey=**/src/pages/MigrationsPage/**

# Complex domain logic in AbilityService
sonar.issue.ignore.multicriteria.complexity4.ruleKey=typescript:S3776
sonar.issue.ignore.multicriteria.complexity4.resourceKey=**/src/shared/model/AbilityService/**

# ====================
# Technical Debt Exclusions
# ====================
# Architecture violations in Schema model (complex domain logic)
sonar.issue.ignore.multicriteria.tech1.ruleKey=tsarchitecture:S7197
sonar.issue.ignore.multicriteria.tech1.resourceKey=**/src/entities/Schema/model/**

# Table rendering issue in RowList (virtualized table structure)
sonar.issue.ignore.multicriteria.tech2.ruleKey=typescript:S5256
sonar.issue.ignore.multicriteria.tech2.resourceKey=**/src/widgets/RowList/ui/RowList/RowList.tsx

# GitHub Actions workflow issue
sonar.issue.ignore.multicriteria.tech3.ruleKey=githubactions:S7631
sonar.issue.ignore.multicriteria.tech3.resourceKey=**/.github/workflows/deploy.yml

# ====================
# Duplicate Code Exclusions
# ====================
sonar.cpd.exclusions=\
  **/src/widgets/SchemaEditor/model/**/*Store.ts,\
  **/src/widgets/TreeDataCard/**/*,\
  **/e2e/**,\
  **/*.spec.ts
