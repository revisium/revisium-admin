# ====================
# Base Configuration
# ====================
sonar.projectKey=revisium_revisium-admin
sonar.organization=revisium

# ====================
# Coverage Settings
# ====================
sonar.coverage.exclusions=**/*

# ====================
# Issue Ignore Rules
# ====================
sonar.issue.ignore.multicriteria=\
  empty1,empty2,empty3,\
  e2e1,e2e2,e2e3,e2e4,e2e5,\
  spec1,spec2,spec3,\
  security1,security2,security3,\
  style1,style2,style3,style4,style5,style6,style7,style8,style9,style10,style11,style12,style13,style14,style15,style16,style17,style18,style19,\
  complexity1,complexity2,complexity3,complexity4,complexity5,complexity6,\
  tech1,tech2,tech3

# ====================
# Empty Methods Pattern
# ====================
# Empty init/dispose methods are acceptable design pattern for base classes and ViewModels
sonar.issue.ignore.multicriteria.empty1.ruleKey=typescript:S1186
sonar.issue.ignore.multicriteria.empty1.resourceKey=**/*Model.ts

sonar.issue.ignore.multicriteria.empty2.ruleKey=typescript:S1186
sonar.issue.ignore.multicriteria.empty2.resourceKey=**/StackItem.ts

sonar.issue.ignore.multicriteria.empty3.ruleKey=typescript:S1186
sonar.issue.ignore.multicriteria.empty3.resourceKey=**/LinkMaker.ts

# ====================
# E2E Test Exclusions
# ====================
# Math.random() is safe in E2E tests (not security-sensitive)
sonar.issue.ignore.multicriteria.e2e1.ruleKey=typescript:S2245
sonar.issue.ignore.multicriteria.e2e1.resourceKey=**/e2e/**

# Nested functions in E2E tests are acceptable due to Playwright test structure
sonar.issue.ignore.multicriteria.e2e2.ruleKey=typescript:S2004
sonar.issue.ignore.multicriteria.e2e2.resourceKey=**/e2e/**

# Skipped tests in E2E are acceptable (work in progress)
sonar.issue.ignore.multicriteria.e2e3.ruleKey=typescript:S1607
sonar.issue.ignore.multicriteria.e2e3.resourceKey=**/e2e/**

# Async function in outer scope in E2E tests
sonar.issue.ignore.multicriteria.e2e4.ruleKey=typescript:S7721
sonar.issue.ignore.multicriteria.e2e4.resourceKey=**/e2e/**

# Object literal as default parameter in E2E tests
sonar.issue.ignore.multicriteria.e2e5.ruleKey=typescript:S7737
sonar.issue.ignore.multicriteria.e2e5.resourceKey=**/e2e/**

# ====================
# Spec File Exclusions
# ====================
# void operator is acceptable in spec files for ensuring instantiation
sonar.issue.ignore.multicriteria.spec1.ruleKey=typescript:S3735
sonar.issue.ignore.multicriteria.spec1.resourceKey=**/*.spec.ts

# Skipped tests in spec files are acceptable (work in progress)
sonar.issue.ignore.multicriteria.spec2.ruleKey=typescript:S1607
sonar.issue.ignore.multicriteria.spec2.resourceKey=**/*.spec.ts

# Constructor for side effects in spec files is acceptable for testing instantiation
sonar.issue.ignore.multicriteria.spec3.ruleKey=typescript:S1848
sonar.issue.ignore.multicriteria.spec3.resourceKey=**/*.spec.ts

# ====================
# Security Hotspot Exclusions
# ====================
# npm install scripts are required for postinstall hooks
sonar.issue.ignore.multicriteria.security1.ruleKey=githubactions:S6505
sonar.issue.ignore.multicriteria.security1.resourceKey=**/.github/workflows/**

# PATH usage in dev config is safe (build tooling only)
sonar.issue.ignore.multicriteria.security2.ruleKey=typescript:S4036
sonar.issue.ignore.multicriteria.security2.resourceKey=**/vite.config.ts

# Docker COPY . is safe with proper .dockerignore
sonar.issue.ignore.multicriteria.security3.ruleKey=docker:S6470
sonar.issue.ignore.multicriteria.security3.resourceKey=**/*Dockerfile*

# ====================
# Style Exclusions
# ====================
# Array index keys are intentional in some cases (stable lists)
sonar.issue.ignore.multicriteria.style1.ruleKey=typescript:S6479
sonar.issue.ignore.multicriteria.style1.resourceKey=**/*.tsx

# Nested ternary for loading/empty/data states is common React pattern
sonar.issue.ignore.multicriteria.style2.ruleKey=typescript:S3358
sonar.issue.ignore.multicriteria.style2.resourceKey=**/*.tsx

# Type aliases for domain semantics (SelectForeignKeyResult = string, etc.)
sonar.issue.ignore.multicriteria.style3.ruleKey=typescript:S6564
sonar.issue.ignore.multicriteria.style3.resourceKey=**/config/types.ts

# Type aliases in spec files
sonar.issue.ignore.multicriteria.style4.ruleKey=typescript:S6564
sonar.issue.ignore.multicriteria.style4.resourceKey=**/*.spec.ts

# void operator is used intentionally for fire-and-forget async calls
sonar.issue.ignore.multicriteria.style5.ruleKey=typescript:S3735
sonar.issue.ignore.multicriteria.style5.resourceKey=**/*.ts

# TODOs are tracked separately
sonar.issue.ignore.multicriteria.style6.ruleKey=typescript:S1135
sonar.issue.ignore.multicriteria.style6.resourceKey=**/*.ts

# Component definitions inside render functions (Virtuoso itemContent pattern)
sonar.issue.ignore.multicriteria.style7.ruleKey=typescript:S6478
sonar.issue.ignore.multicriteria.style7.resourceKey=**/*.tsx

# this to self assignment is required for generator functions accessing class state
sonar.issue.ignore.multicriteria.style8.ruleKey=typescript:S7740
sonar.issue.ignore.multicriteria.style8.resourceKey=**/*.ts

# Negated conditions are sometimes more readable (S7735)
sonar.issue.ignore.multicriteria.style9.ruleKey=typescript:S7735
sonar.issue.ignore.multicriteria.style9.resourceKey=**/*.ts

sonar.issue.ignore.multicriteria.style10.ruleKey=typescript:S7735
sonar.issue.ignore.multicriteria.style10.resourceKey=**/*.tsx

# Unnecessary type assertions are acceptable in some cases (S4325)
sonar.issue.ignore.multicriteria.style11.ruleKey=typescript:S4325
sonar.issue.ignore.multicriteria.style11.resourceKey=**/*.ts

# Use multiple methods instead of flag parameters - acceptable for internal helpers (S2301)
sonar.issue.ignore.multicriteria.style12.ruleKey=typescript:S2301
sonar.issue.ignore.multicriteria.style12.resourceKey=**/*.ts

# Deprecated APIs in browser compat code (S1874)
sonar.issue.ignore.multicriteria.style13.ruleKey=typescript:S1874
sonar.issue.ignore.multicriteria.style13.resourceKey=**/*.ts

# Empty constructor is acceptable for DI (S6647)
sonar.issue.ignore.multicriteria.style14.ruleKey=typescript:S6647
sonar.issue.ignore.multicriteria.style14.resourceKey=**/*.ts

# Useless constructor acceptable for services (S2094)
sonar.issue.ignore.multicriteria.style15.ruleKey=typescript:S2094
sonar.issue.ignore.multicriteria.style15.resourceKey=**/*.ts

# String.raw for escape sequences - false positive in replaceAll (S7780)
sonar.issue.ignore.multicriteria.style16.ruleKey=typescript:S7780
sonar.issue.ignore.multicriteria.style16.resourceKey=**/*.tsx

# Multiple push calls - acceptable for building arrays (S7778)
sonar.issue.ignore.multicriteria.style17.ruleKey=typescript:S7778
sonar.issue.ignore.multicriteria.style17.resourceKey=**/*.ts

# CardInput redundant undefined (S4782)
sonar.issue.ignore.multicriteria.style18.ruleKey=typescript:S4782
sonar.issue.ignore.multicriteria.style18.resourceKey=**/*.tsx

# Object stringification in fieldChangeUtils (S6551)
sonar.issue.ignore.multicriteria.style19.ruleKey=typescript:S6551
sonar.issue.ignore.multicriteria.style19.resourceKey=**/*.ts

# ====================
# Cognitive Complexity Exclusions
# ====================
# Complex domain logic in Schema entity and related utilities
sonar.issue.ignore.multicriteria.complexity1.ruleKey=typescript:S3776
sonar.issue.ignore.multicriteria.complexity1.resourceKey=**/src/entities/Schema/**

# Complex domain logic in RowList widget
sonar.issue.ignore.multicriteria.complexity2.ruleKey=typescript:S3776
sonar.issue.ignore.multicriteria.complexity2.resourceKey=**/src/widgets/RowList/**

# Complex domain logic in MigrationsPage
sonar.issue.ignore.multicriteria.complexity3.ruleKey=typescript:S3776
sonar.issue.ignore.multicriteria.complexity3.resourceKey=**/src/pages/MigrationsPage/**

# Complex domain logic in AbilityService
sonar.issue.ignore.multicriteria.complexity4.ruleKey=typescript:S3776
sonar.issue.ignore.multicriteria.complexity4.resourceKey=**/src/shared/model/AbilityService/**

# Complex domain logic in TreeDataCard widget
sonar.issue.ignore.multicriteria.complexity5.ruleKey=typescript:S3776
sonar.issue.ignore.multicriteria.complexity5.resourceKey=**/src/widgets/TreeDataCard/**

# Complex domain logic in SchemaEditor widget
sonar.issue.ignore.multicriteria.complexity6.ruleKey=typescript:S3776
sonar.issue.ignore.multicriteria.complexity6.resourceKey=**/src/widgets/SchemaEditor/**

# ====================
# Technical Debt Exclusions
# ====================
# Architecture violations in Schema model (complex domain logic)
sonar.issue.ignore.multicriteria.tech1.ruleKey=tsarchitecture:S7197
sonar.issue.ignore.multicriteria.tech1.resourceKey=**/src/entities/Schema/model/**

# Table rendering issue in RowList (virtualized table structure)
sonar.issue.ignore.multicriteria.tech2.ruleKey=typescript:S5256
sonar.issue.ignore.multicriteria.tech2.resourceKey=**/src/widgets/RowList/ui/RowList/RowList.tsx

# GitHub Actions workflow issue
sonar.issue.ignore.multicriteria.tech3.ruleKey=githubactions:S7631
sonar.issue.ignore.multicriteria.tech3.resourceKey=**/.github/workflows/deploy.yml

# ====================
# Duplicate Code Exclusions
# ====================
sonar.cpd.exclusions=\
  **/src/widgets/SchemaEditor/model/**/*Store.ts,\
  **/src/widgets/TreeDataCard/**/*,\
  **/e2e/**,\
  **/*.spec.ts
